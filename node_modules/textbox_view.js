var events = require('events');
var path = require('path');
var util = require('util');
        
function TextBox(jquery_element) {
  events.EventEmitter.call(this);
  this.element = jquery_element;
  this.num = 0;
  var self = this;
  this.element.delegate('.file', 'dblclick', function() {
    var file_path = $(this).data('path');
    self.emit('open', file_path);
  });
}
util.inherits(TextBox, events.EventEmitter);

TextBox.prototype.show = function(filePath, fileData) {
  var self = this;
  self.num ++;
  var fileName = path.basename(filePath);
  self.element.children("tbody").append('<tr><th scope="row">' + self.num +'</th><td>'
   + fileName + '</td><td class="file" data-path="'+ filePath +'">'+ fileData[fileName] + '</td></tr>');
}
TextBox.prototype.reset = function(){
  this.num = 0;
  this.element.children("tbody").html("");
}

exports.TextBox = TextBox; 
