var fs = require('fs');
var path = require('path');


function TextStream(jquery_element) {
  //events.EventEmitter.call(this);
  this.element = jquery_element;
  this.path = [""];
  var self = this;
  this.element.on("change", function(){
  	self.path = self.element.val().split(";");
  	console.log("path", self.path);
  })
}
TextStream.prototype.findVariant = function(){
	var path = this.path;
	var self = this;
	if(path.length == 1 && path[0] == ""){
		return false;
	}
	var src	= path[0];
	var rs = fs.createReadStream(src);
	var fileData = "";
	rs.on('data', function (chunk) {
	    rs.pause();
	    // doSomething(chunk, function () {
	    //     rs.resume();
	    // });
		fileData += chunk;
		rs.resume();
	});

	rs.on('end', function () {
	    console.log(fileData);
	});
}
exports.TextStream = TextStream; 